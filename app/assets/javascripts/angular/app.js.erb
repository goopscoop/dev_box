var DevBox = angular.module('DevBox',['ngRoute', 'ngResource', 'ngMaterial', 'ngSanitize', 'angularMoment', 'markdowned', 'ui.epiceditor']);

DevBox.run(['$rootScope', 'UserService', function($rootScope, UserService) {
  UserService.check(function(err, data) {
    // console.log('Check', err, data);
  })

}])

DevBox.config(['$routeProvider', '$locationProvider', function($routeProvider, $locationProvider) {
  $locationProvider.html5Mode(true);

  $routeProvider
  .when('/', {
    templateUrl:'<%= asset_path("home.html") %>',
    controller: 'HomeCtrl'
  })
  .when('/about', {
    templateUrl: '<%= asset_path("about.html") %>',
    controller: 'StaticCtrl'
  })
  .when('/tools/', {
    templateUrl: '<%= asset_path("tools/index.html") %>',
    controller: 'ToolsCtrl'
  })
  .when('/tools/new', {
    templateUrl: '<%= asset_path("tools/new.html") %>',
    controller: 'ToolsNewCtrl'
  })
  .when('/tools/:id', {
    templateUrl: '<%= asset_path("tools/show.html") %>',
    controller: 'ToolsShowCtrl'
  })
  .when('/tools/:id/edit', {
    templateUrl: '<%= asset_path("tools/edit.html") %>',
    controller: 'ToolsEditCtrl'
  })
  .when('/users/profile', {
    templateUrl: '<%= asset_path("users/show.html") %>',
    controller: 'UsersShowCtrl'
  })
  .when('/users/:id/edit', {
    templateUrl: '<%= asset_path("users/edit.html") %>',
    controller: 'UsersCtrl'
  })
  .when('/tools/:id/reviews/:id/edit', {
    templateUrl: '<%= asset_path("reviews/edit.html") %>',
    controller: 'ReviewsCtrl'
  })
  .when('/login', {
    templateUrl: '<%= asset_path("sessions/new.html") %>',
    controller: 'SessionsCtrl'
  })
  .when('/404', {
    templateUrl: '<%= asset_path("404.html") %>',
    controller: 'StaticCtrl'
  })
  .otherwise({redirectTo: '/404'});
}])
